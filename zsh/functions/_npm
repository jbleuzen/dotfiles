# This is a modified version of the script generated by https://docs.npmjs.com/cli/completion to include `npm install` autocompletion.
# Basically we added `if` blocks to check for `install` subcommand.

###-begin-npm-completion-###
#
# npm command completion script
#
# Installation: npm completion >> ~/.bashrc  (or ~/.zshrc)
# Or, maybe: npm completion > /usr/local/etc/bash_completion.d/npm
_npm_completion() {
    local si=$IFS

    # if your npm command includes `install`
    if [[ ${words} =~ 'install' ]] || [[ ${words} =~ 'i ' ]]; then
        compadd -- $(COMP_CWORD=$((CURRENT-1)) \
        COMP_LINE=$BUFFER \
        COMP_POINT=0 \
        ls ~/.npm -- "${words[@]}" \
        2>/dev/null)
    else
        compadd -- $(COMP_CWORD=$((CURRENT-1)) \
        COMP_LINE=$BUFFER \
        COMP_POINT=0 \
        npm completion -- "${words[@]}" \
        2>/dev/null)
    fi

    IFS=$si
}
compdef _npm_completion npm
###-end-npm-completion-###
